<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover, user-scalable=yes, maximum-scale=5">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="BREWLUXE">
    <meta name="theme-color" content="#0f0f0f">
    <title>BREWLUXE - Where Every Sip Tells a Story</title>
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;700&family=Poppins:wght@300;400;500;600&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --gold: #c9a96e;
            --dark: #1a1a1a;
            --darker: #0f0f0f;
            --light: #f5f5f5;
            --glass: rgba(255, 255, 255, 0.1);
        }

        body {
            font-family: 'Poppins', sans-serif;
            background: linear-gradient(135deg, #0f0f0f 0%, #1a1a1a 100%);
            color: var(--light);
            overflow-x: hidden;
        }

        nav {
            position: fixed;
            top: 0;
            width: 100%;
            background: rgba(15, 15, 15, 0.95);
            backdrop-filter: blur(10px);
            padding: 1rem 5%;
            display: flex;
            justify-content: space-between;
            align-items: center;
            z-index: 1000;
            box-shadow: 0 2px 20px rgba(201, 169, 110, 0.1);
            transition: all 0.3s;
        }

        .logo-container {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .logo {
            width: 60px;
            height: 60px;
            background: radial-gradient(circle, #c9a96e 0%, #8b7355 100%);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 30px;
            box-shadow: 0 0 20px rgba(201, 169, 110, 0.5);
            animation: logoPulse 2s infinite;
        }

        @keyframes logoPulse {
            0%, 100% { box-shadow: 0 0 20px rgba(201, 169, 110, 0.5); }
            50% { box-shadow: 0 0 30px rgba(201, 169, 110, 0.8); }
        }

        .brand-name {
            font-family: 'Playfair Display', serif;
            font-size: 28px;
            font-weight: 700;
            background: linear-gradient(135deg, var(--gold) 0%, white 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .nav-links {
            display: flex;
            gap: 2rem;
            list-style: none;
            align-items: center;
        }

        .nav-links a {
            color: var(--light);
            text-decoration: none;
            position: relative;
            transition: color 0.3s;
            font-weight: 500;
        }

        .nav-links a:hover {
            color: var(--gold);
        }

        .nav-links a::after {
            content: '';
            position: absolute;
            bottom: -5px;
            left: 0;
            width: 0;
            height: 2px;
            background: var(--gold);
            transition: width 0.3s;
        }

        .nav-links a:hover::after {
            width: 100%;
        }

        .nav-icons {
            display: flex;
            gap: 1.5rem;
            align-items: center;
        }

        .icon-btn {
            background: none;
            border: none;
            color: var(--light);
            font-size: 24px;
            cursor: pointer;
            position: relative;
            transition: all 0.3s;
        }

        .icon-btn:hover {
            color: var(--gold);
            transform: scale(1.1);
        }

        .badge {
            position: absolute;
            top: -8px;
            right: -8px;
            background: #e74c3c;
            color: white;
            border-radius: 50%;
            width: 20px;
            height: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 12px;
            font-weight: bold;
        }

        .hero {
            height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            text-align: center;
            position: relative;
            overflow: hidden;
            padding-top: 80px;
        }

        .hero-video {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            object-fit: cover;
            opacity: 0.3;
            z-index: 0;
        }

        .hero::before {
            content: '';
            position: absolute;
            width: 500px;
            height: 500px;
            background: radial-gradient(circle, rgba(201, 169, 110, 0.2) 0%, transparent 70%);
            border-radius: 50%;
            animation: float 6s infinite ease-in-out;
            z-index: 1;
        }

        @keyframes float {
            0%, 100% { transform: translate(0, 0) scale(1); }
            50% { transform: translate(50px, -50px) scale(1.1); }
        }

        .hero-content {
            position: relative;
            z-index: 2;
        }

        .hero h1 {
            font-family: 'Playfair Display', serif;
            font-size: 5rem;
            margin-bottom: 1rem;
            background: linear-gradient(135deg, var(--gold) 0%, white 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            animation: fadeInUp 1s;
        }

        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .hero p {
            font-size: 1.5rem;
            margin-bottom: 2rem;
            color: rgba(255, 255, 255, 0.8);
        }

        .btn-primary {
            background: linear-gradient(135deg, var(--gold) 0%, #8b7355 100%);
            color: white;
            padding: 1rem 3rem;
            border: none;
            border-radius: 50px;
            font-size: 1.1rem;
            cursor: pointer;
            position: relative;
            overflow: hidden;
            transition: transform 0.3s;
        }

        .btn-primary::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent);
            transition: left 0.5s;
        }

        .btn-primary:hover::before {
            left: 100%;
        }

        .btn-primary:hover {
            transform: translateY(-3px);
        }

        section {
            padding: 5rem 5%;
            position: relative;
        }

        .section-title {
            font-family: 'Playfair Display', serif;
            font-size: 3rem;
            text-align: center;
            margin-bottom: 3rem;
            background: linear-gradient(135deg, var(--gold) 0%, white 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .gallery-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 1.5rem;
            margin: 3rem 0;
        }

        .gallery-item {
            position: relative;
            overflow: hidden;
            border-radius: 20px;
            height: 300px;
            cursor: pointer;
            transition: transform 0.3s;
        }

        .gallery-item:hover {
            transform: scale(1.05);
        }

        .gallery-item img,
        .gallery-item video {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .gallery-overlay {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            background: linear-gradient(to top, rgba(0,0,0,0.8), transparent);
            padding: 1.5rem;
            transform: translateY(100%);
            transition: transform 0.3s;
        }

        .gallery-item:hover .gallery-overlay {
            transform: translateY(0);
        }

        .gallery-overlay h3 {
            color: var(--gold);
            margin-bottom: 0.5rem;
        }

        .menu-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 2rem;
            margin-top: 2rem;
        }

        .menu-card {
            background: var(--glass);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 2rem;
            border: 1px solid rgba(201, 169, 110, 0.2);
            transition: transform 0.3s, box-shadow 0.3s;
            cursor: pointer;
        }

        .menu-card:hover {
            transform: translateY(-10px);
            box-shadow: 0 10px 30px rgba(201, 169, 110, 0.3);
        }

        .menu-card img {
            width: 100%;
            height: 200px;
            object-fit: cover;
            border-radius: 15px;
            margin-bottom: 1rem;
        }

        .menu-card h3 {
            color: var(--gold);
            margin-bottom: 0.5rem;
            font-size: 1.5rem;
        }

        .menu-card p {
            color: rgba(255, 255, 255, 0.7);
            margin-bottom: 1rem;
        }

        .price-row {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .price {
            font-size: 1.5rem;
            color: var(--gold);
            font-weight: 600;
        }

        .card-actions {
            display: flex;
            gap: 0.5rem;
        }

        .icon-btn-small {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            border: 1px solid var(--gold);
            background: rgba(201, 169, 110, 0.1);
            color: var(--gold);
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s;
        }

        .icon-btn-small:hover {
            background: var(--gold);
            color: white;
            transform: scale(1.1);
        }

        .icon-btn-small.active {
            background: #e74c3c;
            border-color: #e74c3c;
            color: white;
        }

        .products-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 2rem;
        }

        .product-card {
            background: var(--glass);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 1.5rem;
            border: 1px solid rgba(201, 169, 110, 0.2);
            transition: transform 0.3s;
        }

        .product-card:hover {
            transform: translateY(-10px);
        }

        .product-card img {
            width: 100%;
            height: 220px;
            object-fit: cover;
            border-radius: 15px;
        }

        .rating {
            color: #f39c12;
            margin: 0.5rem 0;
        }

        .video-section {
            max-width: 1200px;
            margin: 3rem auto;
            background: var(--glass);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 2rem;
            border: 1px solid rgba(201, 169, 110, 0.2);
        }

        .video-container {
            position: relative;
            padding-bottom: 56.25%;
            height: 0;
            overflow: hidden;
            border-radius: 15px;
        }

        .video-container video {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .reviews-container {
            max-width: 800px;
            margin: 0 auto;
            position: relative;
        }

        .review-slide {
            display: none;
            background: var(--glass);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 3rem;
            border: 1px solid rgba(201, 169, 110, 0.2);
            text-align: center;
        }

        .review-slide.active {
            display: block;
            animation: slideIn 0.5s;
        }

        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateX(50px);
            }
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }

        .review-avatar {
            width: 80px;
            height: 80px;
            border-radius: 50%;
            margin: 0 auto 1rem;
            border: 3px solid var(--gold);
        }

        .review-stars {
            color: #f39c12;
            font-size: 1.5rem;
            margin: 1rem 0;
        }

        .carousel-controls {
            display: flex;
            justify-content: center;
            gap: 1rem;
            margin-top: 2rem;
        }

        .carousel-btn {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            border: 2px solid var(--gold);
            background: rgba(201, 169, 110, 0.1);
            color: var(--gold);
            cursor: pointer;
            font-size: 20px;
            transition: all 0.3s;
        }

        .carousel-btn:hover {
            background: var(--gold);
            color: white;
        }

        .chat-widget {
            position: fixed;
            bottom: 30px;
            right: 30px;
            z-index: 1000;
        }

        .chat-button {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--gold) 0%, #8b7355 100%);
            border: none;
            color: white;
            font-size: 28px;
            cursor: pointer;
            box-shadow: 0 5px 20px rgba(201, 169, 110, 0.5);
            animation: bounce 2s infinite;
        }

        @keyframes bounce {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }

        .chat-window {
            display: none;
            position: absolute;
            bottom: 80px;
            right: 0;
            width: 350px;
            height: 500px;
            background: rgba(15, 15, 15, 0.98);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            border: 1px solid var(--gold);
            flex-direction: column;
            box-shadow: 0 10px 40px rgba(0,0,0,0.5);
        }

        .chat-window.active {
            display: flex;
        }

        .chat-header {
            padding: 1.5rem;
            background: linear-gradient(135deg, var(--gold) 0%, #8b7355 100%);
            border-radius: 20px 20px 0 0;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .chat-messages {
            flex: 1;
            padding: 1rem;
            overflow-y: auto;
            display: flex;
            flex-direction: column;
            gap: 1rem;
        }

        .message {
            padding: 0.8rem;
            border-radius: 15px;
            max-width: 80%;
            animation: messageSlide 0.3s;
        }

        @keyframes messageSlide {
            from {
                opacity: 0;
                transform: translateY(10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .message.bot {
            background: rgba(201, 169, 110, 0.2);
            align-self: flex-start;
        }

        .message.user {
            background: var(--gold);
            align-self: flex-end;
            color: white;
        }

        .chat-input-container {
            padding: 1rem;
            border-top: 1px solid rgba(201, 169, 110, 0.2);
            display: flex;
            gap: 0.5rem;
        }

        .chat-input {
            flex: 1;
            padding: 0.8rem;
            border-radius: 25px;
            border: 1px solid var(--gold);
            background: rgba(255, 255, 255, 0.05);
            color: white;
            outline: none;
        }

        .send-btn {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: var(--gold);
            border: none;
            color: white;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s;
        }

        .send-btn:hover {
            transform: scale(1.1);
        }

        .loyalty-card {
            background: linear-gradient(135deg, rgba(201, 169, 110, 0.2) 0%, rgba(139, 115, 85, 0.2) 100%);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 3rem;
            border: 1px solid var(--gold);
            text-align: center;
            max-width: 600px;
            margin: 2rem auto;
        }

        .points-display {
            font-size: 3rem;
            color: var(--gold);
            font-weight: 700;
            margin: 1rem 0;
        }

        .progress-bar {
            width: 100%;
            height: 20px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            overflow: hidden;
            margin: 1rem 0;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--gold) 0%, #f39c12 100%);
            transition: width 0.5s;
        }

        .contact-form {
            max-width: 600px;
            margin: 0 auto;
            background: var(--glass);
            backdrop-filter: blur(10px);
            padding: 3rem;
            border-radius: 20px;
            border: 1px solid rgba(201, 169, 110, 0.2);
        }

        .form-group {
            margin-bottom: 1.5rem;
        }

        .form-group label {
            display: block;
            margin-bottom: 0.5rem;
            color: var(--gold);
            font-weight: 500;
        }

        .form-group input,
        .form-group textarea,
        .form-group select {
            width: 100%;
            padding: 1rem;
            border-radius: 10px;
            border: 1px solid rgba(201, 169, 110, 0.3);
            background: rgba(255, 255, 255, 0.05);
            color: white;
            outline: none;
            transition: all 0.3s;
        }

        .form-group input:focus,
        .form-group textarea:focus,
        .form-group select:focus {
            border-color: var(--gold);
            box-shadow: 0 0 15px rgba(201, 169, 110, 0.3);
        }

        footer {
            background: var(--darker);
            padding: 3rem 5%;
            text-align: center;
            border-top: 1px solid rgba(201, 169, 110, 0.2);
        }

        .social-icons {
            display: flex;
            gap: 1rem;
            justify-content: center;
            margin: 2rem 0;
        }

        .social-icon {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            border: 2px solid var(--gold);
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--gold);
            text-decoration: none;
            font-size: 20px;
            transition: all 0.3s;
        }

        .social-icon:hover {
            background: var(--gold);
            color: white;
            transform: scale(1.1);
        }

        .toast {
            position: fixed;
            top: 100px;
            right: 30px;
            background: rgba(15, 15, 15, 0.98);
            backdrop-filter: blur(10px);
            padding: 1rem 2rem;
            border-radius: 10px;
            border: 1px solid var(--gold);
            display: flex;
            align-items: center;
            gap: 1rem;
            transform: translateX(400px);
            transition: transform 0.3s;
            z-index: 2000;
        }

        .toast.show {
            transform: translateX(0);
        }

        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.9);
            z-index: 2000;
            align-items: center;
            justify-content: center;
        }

        .modal.active {
            display: flex;
        }

        .modal-content {
            background: var(--dark);
            border-radius: 20px;
            padding: 3rem;
            max-width: 600px;
            width: 90%;
            border: 1px solid var(--gold);
            position: relative;
            max-height: 80vh;
            overflow-y: auto;
        }

        .close-btn {
            position: absolute;
            top: 1rem;
            right: 1rem;
            background: none;
            border: none;
            color: var(--gold);
            font-size: 30px;
            cursor: pointer;
            transition: all 0.3s;
        }

        .close-btn:hover {
            transform: scale(1.2);
        }

        .newsletter-form {
            display: flex;
            gap: 1rem;
            margin-top: 2rem;
        }

        .newsletter-form input {
            flex: 1;
            padding: 1rem;
            border-radius: 10px;
            border: 1px solid var(--gold);
            background: rgba(255, 255, 255, 0.05);
            color: white;
            outline: none;
        }

        .cart-modal-content {
            max-height: 50vh;
            overflow-y: auto;
        }

        .cart-item {
            background: var(--glass);
            padding: 1rem;
            border-radius: 10px;
            margin-bottom: 1rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .cart-item-info h4 {
            color: var(--gold);
            margin-bottom: 0.5rem;
        }

        .cart-item-controls {
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .qty-btn {
            width: 30px;
            height: 30px;
            border-radius: 50%;
            background: var(--gold);
            border: none;
            color: white;
            cursor: pointer;
            font-size: 18px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .cart-total {
            margin-top: 2rem;
            padding-top: 1rem;
            border-top: 2px solid var(--gold);
            font-size: 1.5rem;
            color: var(--gold);
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 2rem;
            margin: 3rem 0;
        }

        .stat-card {
            background: var(--glass);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 2rem;
            text-align: center;
            border: 1px solid rgba(201, 169, 110, 0.2);
        }

        .stat-number {
            font-size: 3rem;
            color: var(--gold);
            font-weight: 700;
            margin-bottom: 0.5rem;
        }

        .lightbox {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.95);
            z-index: 3000;
            align-items: center;
            justify-content: center;
        }

        .lightbox.active {
            display: flex;
        }

        .lightbox img,
        .lightbox video {
            max-width: 90%;
            max-height: 90%;
            border-radius: 10px;
        }

        .lightbox-close {
            position: absolute;
            top: 2rem;
            right: 2rem;
            background: var(--gold);
            border: none;
            color: white;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            font-size: 24px;
            cursor: pointer;
        }

        /* Mobile Menu Styles */
        .hamburger {
            display: none;
            flex-direction: column;
            cursor: pointer;
            gap: 6px;
            background: none;
            border: none;
        }

        .hamburger span {
            width: 25px;
            height: 3px;
            background: var(--gold);
            border-radius: 2px;
            transition: all 0.3s;
        }

        .hamburger.active span:nth-child(1) {
            transform: rotate(45deg) translate(10px, 10px);
        }

        .hamburger.active span:nth-child(2) {
            opacity: 0;
        }

        .hamburger.active span:nth-child(3) {
            transform: rotate(-45deg) translate(7px, -7px);
        }

        /* Responsive Text */
        .section-title {
            font-size: clamp(2rem, 5vw, 3rem);
        }

        .hero h1 {
            font-size: clamp(2rem, 8vw, 5rem) !important;
        }

        section {
            padding: clamp(2rem, 5vw, 5rem) 5%;
        }

        /* Tablet */
        @media (max-width: 1024px) {
            nav {
                padding: 1rem 3%;
            }

            .brand-name {
                font-size: 22px;
            }

            .gallery-grid,
            .menu-grid,
            .products-grid {
                grid-template-columns: repeat(2, 1fr);
                gap: 1rem;
            }

            .stats-grid {
                grid-template-columns: repeat(2, 1fr);
            }
        }

        /* Mobile Devices */
        @media (max-width: 768px) {
            nav {
                padding: 0.75rem 3%;
            }

            .logo {
                width: 45px;
                height: 45px;
                font-size: 24px;
            }

            .brand-name {
                font-size: 18px;
            }

            .nav-links {
                display: none;
            }

            .hamburger {
                display: flex;
            }

            .nav-icons {
                gap: 1rem;
            }

            .icon-btn {
                font-size: 20px;
            }

            .hero {
                padding-top: 60px;
                min-height: calc(100vh - 60px);
            }

            .hero p {
                font-size: 1.2rem;
            }

            .btn-primary {
                padding: 0.8rem 2rem;
                font-size: 1rem;
            }

            .gallery-grid,
            .menu-grid,
            .products-grid,
            .stats-grid {
                grid-template-columns: 1fr;
                gap: 1rem;
            }

            .gallery-item {
                height: 250px;
            }

            .menu-card,
            .product-card {
                padding: 1rem;
            }

            .menu-card img,
            .product-card img {
                height: 180px;
            }

            .menu-card h3 {
                font-size: 1.2rem;
            }

            .price-row {
                flex-direction: column;
                align-items: flex-start;
                gap: 0.5rem;
            }

            .card-actions {
                width: 100%;
            }

            .icon-btn-small {
                width: 35px;
                height: 35px;
                font-size: 16px;
            }

            .chat-window {
                width: 90vw;
                right: 5vw;
                height: 60vh;
                bottom: 20px;
            }

            .contact-form,
            .loyalty-card,
            .newsletter-form {
                padding: 1.5rem;
            }

            .loyalty-card {
                max-width: 100%;
            }

            .modal-content {
                padding: 1.5rem;
                width: 95%;
            }

            .newsletter-form {
                flex-direction: column;
            }

            .newsletter-form input,
            .newsletter-form button {
                width: 100%;
            }

            .cart-item {
                flex-direction: column;
                gap: 1rem;
                align-items: flex-start;
            }

            .cart-item-info {
                width: 100%;
            }

            .cart-item-controls {
                width: 100%;
                justify-content: space-between;
            }

            .video-section {
                padding: 1rem;
            }

            .review-slide {
                padding: 1.5rem;
            }

            .review-avatar {
                width: 60px;
                height: 60px;
            }

            footer {
                padding: 2rem 5%;
            }

            .form-group {
                margin-bottom: 1rem;
            }

            .form-group input,
            .form-group textarea,
            .form-group select {
                padding: 0.8rem;
            }

            .form-group label {
                font-size: 0.9rem;
            }

            .checkout-grid {
                grid-template-columns: 1fr;
            }
        }

        /* Small Phones */
        @media (max-width: 480px) {
            nav {
                padding: 0.5rem 2%;
            }

            .logo {
                width: 40px;
                height: 40px;
                font-size: 20px;
            }

            .brand-name {
                font-size: 16px;
            }

            section {
                padding: clamp(1.5rem, 4vw, 2.5rem) 3%;
            }

            .section-title {
                font-size: 1.8rem;
                margin-bottom: 1.5rem;
            }

            .hero p {
                font-size: 1rem;
            }

            .btn-primary {
                padding: 0.7rem 1.5rem;
                font-size: 0.95rem;
            }

            .menu-card img,
            .product-card img {
                height: 150px;
            }

            .price {
                font-size: 1.2rem;
            }

            .chat-window {
                width: 95vw;
                height: 70vh;
            }

            .contact-form {
                padding: 1rem;
            }

            .form-group input,
            .form-group textarea,
            .form-group select {
                font-size: 16px;
                padding: 0.7rem;
            }

            .carousel-btn {
                width: 40px;
                height: 40px;
                font-size: 18px;
            }

            .stat-card {
                padding: 1.5rem 1rem;
            }

            .stat-number {
                font-size: 2rem;
            }

            .points-display {
                font-size: 2.5rem;
            }
        }

        /* Enhanced Mobile Friendliness */
        @media (max-width: 768px) {
            /* Touch target optimization (44px minimum) */
            .icon-btn {
                min-width: 44px;
                min-height: 44px;
                display: flex;
                align-items: center;
                justify-content: center;
            }

            .icon-btn-small {
                min-width: 44px;
                min-height: 44px;
            }

            .btn-primary {
                min-height: 44px;
                min-width: 44px;
            }

            .hamburger {
                min-width: 44px;
                min-height: 44px;
            }

            .qty-btn {
                min-width: 40px;
                min-height: 40px;
            }

            /* Improved modal for mobile */
            .modal {
                align-items: flex-end;
            }

            .modal-content {
                width: 100%;
                max-height: 90vh;
                border-radius: 20px 20px 0 0;
                overflow-y: auto;
                -webkit-overflow-scrolling: touch;
            }

            .close-btn {
                top: 1rem;
                right: 1rem;
                z-index: 10;
            }

            /* Improved cart modal on mobile */
            #cartModal .modal-content {
                max-height: 80vh;
            }

            #cartModal .cart-modal-content {
                max-height: calc(80vh - 200px);
            }

            /* Better form inputs on mobile */
            .form-group input,
            .form-group textarea,
            .form-group select {
                font-size: 16px; /* prevents zoom on iOS focus */
                min-height: 44px;
                padding: 0.75rem;
            }

            .form-group input::placeholder,
            .form-group textarea::placeholder {
                font-size: 14px;
            }

            /* Improve chat window mobile experience */
            .chat-button {
                min-width: 50px;
                min-height: 50px;
            }

            .chat-window {
                max-height: calc(100vh - 100px);
            }

            .chat-messages {
                max-height: calc(100% - 120px);
            }

            .chat-input {
                font-size: 16px;
                min-height: 40px;
            }

            /* Better newsletter/search modals */
            #newsletterModal .modal-content,
            #searchModal .modal-content {
                width: 95%;
                max-height: 85vh;
                max-width: 100%;
            }

            /* Checkout modal improvements */
            #checkoutModal .modal-content {
                width: 100%;
                max-height: 95vh;
                border-radius: 20px 20px 0 0;
            }

            #checkoutContent {
                max-height: calc(95vh - 80px);
                overflow-y: auto;
                -webkit-overflow-scrolling: touch;
            }

            /* Better accordion/collapsible on mobile */
            .order-type-btn {
                min-height: 44px;
                padding: 0.75rem 1rem;
            }

            /* Ensure proper spacing in mobile forms */
            .form-group {
                margin-bottom: 1.2rem;
            }

            /* Improve button spacing in forms */
            .form-group button {
                min-height: 44px;
                font-size: 16px;
            }

            /* Prevent pinch-zoom issues */
            input[type="text"],
            input[type="email"],
            input[type="tel"],
            input[type="number"],
            select,
            textarea {
                touch-action: manipulation;
            }
        }

        /* Extra small phones (< 375px) */
        @media (max-width: 374px) {
            .hero h1 {
                font-size: clamp(1.5rem, 7vw, 3rem) !important;
            }

            .section-title {
                font-size: 1.5rem;
            }

            .menu-card h3,
            .product-card h3 {
                font-size: 1rem;
            }

            .price {
                font-size: 1rem;
            }

            .btn-primary {
                padding: 0.6rem 1.2rem;
                font-size: 0.9rem;
                min-height: 40px;
            }

            nav {
                padding: 0.4rem 1%;
            }

            .logo {
                width: 35px;
                height: 35px;
                font-size: 18px;
            }

            .brand-name {
                font-size: 14px;
            }

            .icon-btn {
                font-size: 18px;
            }

            .form-group label {
                font-size: 0.8rem;
            }
        }

        /* Landscape orientation adjustments */
        @media (max-height: 500px) and (orientation: landscape) {
            nav {
                padding: 0.4rem 2%;
            }

            .hero {
                min-height: 100vh;
            }

            section {
                padding: 2rem 5%;
            }

            .modal-content {
                max-height: 90vh;
            }

            .logo {
                width: 35px;
                height: 35px;
            }

            .chat-window {
                height: 85vh;
            }
        }

        /* Prevent text selection on buttons/interactive elements */
        .icon-btn,
        .btn-primary,
        .icon-btn-small,
        button {
            -webkit-user-select: none;
            -moz-user-select: none;
            -ms-user-select: none;
            user-select: none;
        }

        /* Smooth scroll behavior */
        html {
            scroll-behavior: smooth;
            -webkit-tap-highlight-color: transparent;
        }

        /* Improve tap highlights */
        button, a {
            -webkit-tap-highlight-color: rgba(201, 169, 110, 0.2);
        }

        /* Mobile keyboard handling */
        input:focus,
        textarea:focus,
        select:focus {
            outline: 2px solid var(--gold);
            outline-offset: 2px;
        }
    </style>
</head>
<body>
    <nav>
        <div class="logo-container">
            <div class="logo">‚òï</div>
            <div class="brand-name">BREWLUXE</div>
        </div>
        <ul class="nav-links" id="navLinks">
            <li><a href="#home">Home</a></li>
            <li><a href="#gallery">Gallery</a></li>
            <li><a href="#menu">Menu</a></li>
            <li><a href="#products">Products</a></li>
            <li><a href="#reviews">Reviews</a></li>
            <li><a href="#contact">Contact</a></li>
        </ul>
        <div class="nav-icons">
            <button class="icon-btn" id="searchBtn" title="Search (Ctrl+K)">üîç</button>
            <button class="icon-btn" id="notificationBtn" title="Notifications">
                üîî
                <span class="badge" id="notifBadge">3</span>
            </button>
            <button class="icon-btn" id="cartBtn" title="Cart">
                üõí
                <span class="badge" id="cartBadge">0</span>
            </button>
            <button class="hamburger" id="hamburger">
                <span></span>
                <span></span>
                <span></span>
            </button>
        </div>
    </nav>

    <section class="hero" id="home">
        <video class="hero-video" autoplay muted loop playsinline>
            <source src="https://cdn.coverr.co/videos/coverr-pouring-coffee-in-a-cup-9635/1080p.mp4" type="video/mp4">
        </video>
        <div class="hero-content">
            <h1>BREWLUXE</h1>
            <p>Where Every Sip Tells a Story</p>
            <button class="btn-primary" onclick="scrollToSection('menu')">Explore Menu</button>
        </div>
    </section>

    <section id="about">
        <h2 class="section-title">Our Story</h2>
        <div class="stats-grid">
            <div class="stat-card">
                <div class="stat-number">5</div>
                <p>Years of Excellence</p>
            </div>
            <div class="stat-card">
                <div class="stat-number">5K+</div>
                <p>Happy Customers</p>
            </div>
            <div class="stat-card">
                <div class="stat-number">25+</div>
                <p>Coffee Varieties</p>
            </div>
            <div class="stat-card">
                <div class="stat-number">4.5‚òÖ</div>
                <p>Average Rating</p>
            </div>
        </div>
    </section>

    <section id="gallery">
        <h2 class="section-title">Gallery</h2>
        <div class="gallery-grid" id="galleryGrid"></div>
        
        
    
    </section>

    <section id="menu">
        <h2 class="section-title">Our Signature Menu</h2>
        <div class="menu-grid" id="menuGrid"></div>
    </section>

    <section id="products">
        <h2 class="section-title">Premium Coffee Beans</h2>
        <div class="products-grid" id="productsGrid"></div>
    </section>

    <section id="reviews">
        <h2 class="section-title">What Our Customers Say</h2>
        <div class="reviews-container">
            <div class="review-slides" id="reviewSlides"></div>
            <div class="carousel-controls">
                <button class="carousel-btn" onclick="changeReview(-1)">‚Üê</button>
                <button class="carousel-btn" onclick="changeReview(1)">‚Üí</button>
            </div>
        </div>
    </section>

    <section id="loyalty">
        <h2 class="section-title">Loyalty Rewards</h2>
        <div class="loyalty-card">
            <h3>Your Points</h3>
            <div class="points-display" id="pointsDisplay">0</div>
            <p>Points to Gold Member: <span id="pointsToGold">750</span></p>
            <div class="progress-bar">
                <div class="progress-fill" id="progressFill" style="width: 0%"></div>
            </div>
            <p style="margin-top: 1rem;">Earn 10% back on every purchase!</p>
        </div>
    </section>

    <section id="contact">
        <h2 class="section-title">Get In Touch</h2>
        <form class="contact-form" id="contactForm">
            <div class="form-group">
                <label>Name</label>
                <input type="text" name="name" required>
            </div>
            <div class="form-group">
                <label>Email</label>
                <input type="email" name="email" required>
            </div>
            <div class="form-group">
                <label>Phone</label>
                <input type="tel" name="phone">
            </div>
            <div class="form-group">
                <label>Subject</label>
                <select name="subject">
                    <option value="general">General Inquiry</option>
                    <option value="catering">Catering Services</option>
                    <option value="wholesale">Wholesale</option>
                    <option value="feedback">Feedback</option>
                </select>
            </div>
            <div class="form-group">
                <label>Message</label>
                <textarea name="message" rows="5" required></textarea>
            </div>
            <button type="submit" class="btn-primary">Send Message</button>
        </form>
        <iframe class="map" src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d30153.788252261566!2d72.82321484621745!3d19.141690214227783!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x3be7b63aceef0c69%3A0x2aa80cf2287dfa3b!2sJogeshwari%20West%2C%20Mumbai%2C%20Maharashtra%20400047!5e0!3m2!1sen!2sin!4v1629452077891!5m2!1sen!2sin" 
     allowfullscreen="" 
      loading="lazy">
     </iframe>

    </section>

    <footer>
        <div class="logo-container" style="justify-content: center; margin-bottom: 1rem;">
            <div class="logo">‚òï</div>
            <div class="brand-name">BREWLUXE</div>
        </div>
        <p>Where Every Sip Tells a Story</p>
        <p style="margin-top: 1rem; color: rgba(255,255,255,0.6);">123 Jogeshwari West , Mumbai, Maharashtra</p>
        <p style="color: rgba(255,255,255,0.6);">Mon-Fri: 6AM-8PM | Sat-Sun: 7AM-9PM</p>
        <div class="social-icons">
            <a href="#" class="social-icon" title="Facebook">üìò</a>
            <a href="#" class="social-icon" title="Instagram">üì∑</a>
            <a href="#" class="social-icon" title="Twitter">üê¶</a>
            <a href="#" class="social-icon" title="Location">üìç</a>
        </div>
        <p>&copy; 2025 BREWLUXE. All rights reserved.</p>
    </footer>

    <div class="chat-widget">
        <button class="chat-button" id="chatToggle">üí¨</button>
        <div class="chat-window" id="chatWindow">
            <div class="chat-header">
                <h3>Chat with BREWLUXE</h3>
                <button class="close-btn" onclick="toggleChat()" style="position: static;">√ó</button>
            </div>
            <div class="chat-messages" id="chatMessages">
                <div class="message bot">Hello! How can I help you today?</div>
            </div>
            <div class="chat-input-container">
                <input type="text" class="chat-input" id="chatInput" placeholder="Type a message...">
                <button class="send-btn" onclick="sendChatMessage()">‚û§</button>
            </div>
        </div>
    </div>

    <div class="modal" id="searchModal">
        <div class="modal-content">
            <button class="close-btn" onclick="closeSearch()">√ó</button>
            <h2>Search Menu</h2>
            <div class="form-group">
                <input type="text" id="searchInput" placeholder="Search for coffee..." style="width: 100%;">
            </div>
            <div id="searchResults"></div>
        </div>
    </div>

    <div class="modal" id="newsletterModal">
        <div class="modal-content">
            <button class="close-btn" onclick="closeNewsletter()">√ó</button>
            <h2>Subscribe to Newsletter</h2>
            <p>Get exclusive offers and +20 loyalty points!</p>
            <form class="newsletter-form" id="newsletterForm">
                <input type="email" placeholder="Enter your email" required>
                <button type="submit" class="btn-primary">Subscribe</button>
            </form>
        </div>
    </div>

    <div class="modal" id="cartModal">
        <div class="modal-content">
            <button class="close-btn" onclick="closeCart()">√ó</button>
            <h2>Your Cart</h2>
            <div class="cart-modal-content" id="cartModalContent"></div>
            <div class="cart-total">
                Total: $<span id="cartTotal">0.00</span>
            </div>
            <button class="btn-primary" style="width: 100%; margin-top: 1rem;" onclick="proceedToCheckout()">Proceed to Checkout</button>
        </div>
    </div>

    <div class="modal" id="checkoutModal">
        <div class="modal-content" style="max-width: 800px;">
            <button class="close-btn" onclick="closeCheckout()">√ó</button>
            <h2>Checkout</h2>
            
            <div id="checkoutContent">
                <div class="form-group">
                    <label>Order Type</label>
                    <div style="display: flex; gap: 1rem; margin-bottom: 1rem;">
                        <button class="order-type-btn active" onclick="setOrderType('pickup')" id="pickupBtn">
                            üè™ Pickup
                        </button>
                        <button class="order-type-btn" onclick="setOrderType('delivery')" id="deliveryBtn">
                            üöó Delivery
                        </button>
                    </div>
                </div>

                <form id="checkoutForm">
                    <div class="form-group">
                        <label>Full Name *</label>
                        <input type="text" name="fullName" required>
                    </div>

                    <div class="form-group">
                        <label>Email *</label>
                        <input type="email" name="email" required>
                    </div>

                    <div class="form-group">
                        <label>Phone Number *</label>
                        <input type="tel" name="phone" required>
                    </div>

                    <div id="deliveryFields" style="display: none;">
                        <div class="form-group">
                            <label>Delivery Address *</label>
                            <input type="text" name="address" placeholder="Street Address">
                        </div>

                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1rem;">
                            <div class="form-group">
                                <label>City *</label>
                                <input type="text" name="city">
                            </div>
                            <div class="form-group">
                                <label>Postal Code *</label>
                                <input type="text" name="postalCode">
                            </div>
                        </div>

                        <div class="form-group">
                            <label>Delivery Instructions</label>
                            <textarea name="instructions" rows="2" placeholder="Any special instructions for delivery..."></textarea>
                        </div>
                    </div>

                    <div class="form-group">
                        <label>Special Requests</label>
                        <textarea name="specialRequests" rows="2" placeholder="Allergies, preferences, etc..."></textarea>
                    </div>

                    <div class="form-group">
                        <label>Payment Method</label>
                        <select name="paymentMethod" id="paymentMethod">
                            <option value="card">Credit/Debit Card</option>
                            <option value="cash">Cash on Delivery</option>
                            <option value="upi">UPI Payment</option>
                        </select>
                    </div>

                    <div id="cardFields">
                        <div class="form-group">
                            <label>Card Number</label>
                            <input type="text" name="cardNumber" placeholder="1234 5678 9012 3456" maxlength="19">
                        </div>

                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1rem;">
                            <div class="form-group">
                                <label>Expiry Date</label>
                                <input type="text" name="expiry" placeholder="MM/YY" maxlength="5">
                            </div>
                            <div class="form-group">
                                <label>CVV</label>
                                <input type="text" name="cvv" placeholder="123" maxlength="3">
                            </div>
                        </div>
                    </div>

                    <div class="order-summary" style="background: rgba(255,255,255,0.05); padding: 1.5rem; border-radius: 10px; margin: 1.5rem 0;">
                        <h3 style="color: var(--gold); margin-bottom: 1rem;">Order Summary</h3>
                        <div id="checkoutItemsList"></div>
                        <div style="border-top: 1px solid rgba(201,169,110,0.3); margin-top: 1rem; padding-top: 1rem;">
                            <div style="display: flex; justify-content: space-between; margin-bottom: 0.5rem;">
                                <span>Subtotal:</span>
                                <span>$<span id="checkoutSubtotal">0.00</span></span>
                            </div>
                            <div style="display: flex; justify-content: space-between; margin-bottom: 0.5rem;" id="deliveryFeeRow" style="display: none;">
                                <span>Delivery Fee:</span>
                                <span>$<span id="deliveryFee">3.99</span></span>
                            </div>
                            <div style="display: flex; justify-content: space-between; font-size: 1.3rem; color: var(--gold); font-weight: 600;">
                                <span>Total:</span>
                                <span>$<span id="checkoutTotal">0.00</span></span>
                            </div>
                        </div>
                    </div>

                    <button type="submit" class="btn-primary" style="width: 100%;">Place Order</button>
                </form>
            </div>

            <div id="orderConfirmation" style="display: none; text-align: center; padding: 2rem;">
                <div style="font-size: 4rem; margin-bottom: 1rem;">‚úÖ</div>
                <h2 style="color: var(--gold); margin-bottom: 1rem;">Order Confirmed!</h2>
                <p style="margin-bottom: 1rem;">Your order has been placed successfully.</p>
                <div style="background: rgba(255,255,255,0.05); padding: 1.5rem; border-radius: 10px; margin: 1.5rem 0;">
                    <p style="color: var(--gold); font-size: 1.2rem; margin-bottom: 0.5rem;">Order #<span id="orderNumber"></span></p>
                    <p style="color: rgba(255,255,255,0.7);">Estimated time: <span id="estimatedTime"></span></p>
                </div>
                <p style="margin-bottom: 1.5rem;">We'll send you updates via email and SMS.</p>
                <button class="btn-primary" onclick="closeCheckout()">Done</button>
            </div>
        </div>
    </div>

    <div class="lightbox" id="lightbox">
        <button class="lightbox-close" onclick="closeLightbox()">√ó</button>
        <div id="lightboxContent"></div>
    </div>

    <script>
        // Static gallery items (no API needed)
        const galleryItems = [
            { type: 'image', src: 'https://images.unsplash.com/photo-1495474472287-4d71bcdd2085?w=800&h=600&fit=crop', title: 'Fresh Brew', desc: 'Morning perfection' },
            { type: 'image', src: 'https://images.unsplash.com/photo-1509042239860-f550ce710b93?w=800&h=600&fit=crop', title: 'Coffee Beans', desc: 'Premium selection' },
            { type: 'video', src: 'https://cdn.coverr.co/videos/coverr-coffee-being-poured-into-a-cup-4622/1080p.mp4', title: 'Pour Perfection', desc: 'Art in motion' },
            { type: 'image', src: 'https://images.unsplash.com/photo-1511920170033-f8396924c348?w=800&h=600&fit=crop', title: 'Latte Art', desc: 'Handcrafted beauty' },
            { type: 'image', src: 'https://images.unsplash.com/photo-1442512595331-e89e73853f31?w=800&h=600&fit=crop', title: 'Coffee Shop', desc: 'Cozy atmosphere' },
            { type: 'image', src: 'https://images.unsplash.com/photo-1497935586351-b67a49e012bf?w=800&h=600&fit=crop', title: 'Espresso Shot', desc: 'Bold and rich' }
        ];

        // These will be fetched from API
        let menuItems = [];
        let products = [];
        
        // API base URL resolver (production-friendly)
        // Priority:
        // 1) window.APP_CONFIG.API_BASE_URL (full base, may include /api)
        // 2) window.BREWLUXE_BACKEND_URL (hostname or full base; /api appended if missing)
        // 3) meta[name="brewluxe-api"] content value
        // 4) production default (update to your real URL)
        // 5) final fallback to localhost for local development
        const API_BASE_URL = (function() {
            function normalize(url) {
                if (!url) return null;
                let s = String(url).trim();
                s = s.replace(/\/+$/g, '');
                // if the URL doesn't end with /api, append it
                if (!/\/api$/i.test(s)) s = s + '/api';
                return s;
            }

            if (window.APP_CONFIG && window.APP_CONFIG.API_BASE_URL) return normalize(window.APP_CONFIG.API_BASE_URL);
            if (window.BREWLUXE_BACKEND_URL) return normalize(window.BREWLUXE_BACKEND_URL);
            const meta = document.querySelector('meta[name="brewluxe-api"]');
            if (meta && meta.content) return normalize(meta.content);

            // TODO: replace this with your actual production backend URL (must be reachable by the frontend)
            const productionDefault = 'https://brewluxe-backend.onrender.com/api';
            return productionDefault || 'http://localhost:3000/api';
        })();

        const reviews = [
            { name: 'Sarah Johnson', avatar: 'https://i.pravatar.cc/150?img=1', rating: 5, date: '2025-09-15', text: 'Absolutely love BREWLUXE! The espresso is perfectly brewed every time, and the ambiance is so cozy. The loyalty program is a great bonus!' },
            { name: 'Michael Chen', avatar: 'https://i.pravatar.cc/150?img=13', rating: 5, date: '2025-09-20', text: 'Best coffee shop in town! Their Ethiopian blend is phenomenal. Staff is incredibly friendly and knowledgeable about their beans.' },
            { name: 'Emily Rodriguez', avatar: 'https://i.pravatar.cc/150?img=5', rating: 4, date: '2025-09-22', text: 'Great selection of drinks and the atmosphere is perfect for working. The caramel latte is my go-to. Highly recommend!' },
            { name: 'David Thompson', avatar: 'https://i.pravatar.cc/150?img=12', rating: 5, date: '2025-09-25', text: 'Premium quality coffee at reasonable prices. The loyalty points system is generous and the customer service is outstanding!' },
            { name: 'Lisa Martinez', avatar: 'https://i.pravatar.cc/150?img=9', rating: 5, date: '2025-09-28', text: 'My favorite coffee spot! The cold brew is incredibly smooth and the online ordering makes it so convenient. Love the chat support too!' },
            { name: 'James Wilson', avatar: 'https://i.pravatar.cc/150?img=14', rating: 4, date: '2025-10-01', text: 'Fantastic coffee and great vibes. The website makes ordering easy and the rewards program keeps me coming back. Well worth it!' }
        ];

        let cart = [];
        let favorites = [];
        let loyaltyPoints = 0;
        let currentReview = 0;

        // Persistence helpers
        function saveState() {
            try {
                localStorage.setItem('brewluxe_cart', JSON.stringify(cart));
                localStorage.setItem('brewluxe_favorites', JSON.stringify(favorites));
                localStorage.setItem('brewluxe_loyalty', String(loyaltyPoints));
            } catch (err) {
                console.warn('Could not save state to localStorage', err);
            }
        }

        function loadState() {
            try {
                const c = localStorage.getItem('brewluxe_cart');
                const f = localStorage.getItem('brewluxe_favorites');
                const l = localStorage.getItem('brewluxe_loyalty');

                if (c) cart = JSON.parse(c);
                if (f) favorites = JSON.parse(f);
                if (l) loyaltyPoints = parseInt(l, 10) || 0;
            } catch (err) {
                console.warn('Could not load state from localStorage', err);
            }
        }

        // client-side checkout validation
        function validateCheckout(formData) {
            const fullName = formData.get('fullName') || '';
            const email = formData.get('email') || '';
            const phone = formData.get('phone') || '';
            const orderType = currentOrderType;
            const paymentMethod = formData.get('paymentMethod');

            if (!fullName.trim()) return { valid: false, message: 'Please enter your full name.' };
            if (!email.trim() || !/^\S+@\S+\.\S+$/.test(email)) return { valid: false, message: 'Please enter a valid email.' };
            if (!phone.trim()) return { valid: false, message: 'Please enter your phone number.' };

            if (orderType === 'delivery') {
                const address = formData.get('address') || '';
                const city = formData.get('city') || '';
                const postalCode = formData.get('postalCode') || '';
                if (!address.trim() || !city.trim() || !postalCode.trim()) return { valid: false, message: 'Please fill delivery address, city and postal code.' };
            }

            if (paymentMethod === 'card') {
                const cardNumber = formData.get('cardNumber') || '';
                const expiry = formData.get('expiry') || '';
                const cvv = formData.get('cvv') || '';
                if (!/^[0-9 \-]{13,19}$/.test(cardNumber)) return { valid: false, message: 'Please enter a valid card number.' };
                if (!/^\d{2}\/\d{2}$/.test(expiry)) return { valid: false, message: 'Please enter expiry in MM/YY format.' };
                if (!/^\d{3,4}$/.test(cvv)) return { valid: false, message: 'Please enter a valid CVV.' };
            }

            if (!cart || cart.length === 0) return { valid: false, message: 'Your cart is empty.' };

            return { valid: true };
        }

        // ============ API FETCH FUNCTIONS ============
        
        // Fetch menu items from API
        async function fetchMenuItems() {
            try {
                const response = await fetch(`${API_BASE_URL}/menu`);
                if (response.ok) {
                    menuItems = await response.json();
                    console.log('‚úì Fetched menu items from API:', menuItems.length);
                    return true;
                } else {
                    console.warn('API returned status:', response.status);
                    return false;
                }
            } catch (error) {
                console.warn('Failed to fetch menu items from API:', error);
                return false;
            }
        }

        // Fetch products from API
        async function fetchProducts() {
            try {
                const response = await fetch(`${API_BASE_URL}/products`);
                if (response.ok) {
                    products = await response.json();
                    console.log('‚úì Fetched products from API:', products.length);
                    return true;
                } else {
                    console.warn('API returned status:', response.status);
                    return false;
                }
            } catch (error) {
                console.warn('Failed to fetch products from API:', error);
                return false;
            }
        }

        // Detect mobile device
        function isMobileDevice() {
            return /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);
        }

        // Handle viewport height changes (soft keyboard appear/disappear on mobile)
        function handleMobileViewport() {
            if (!isMobileDevice()) return;
            
            let lastViewportHeight = window.innerHeight;
            
            window.addEventListener('resize', () => {
                const currentHeight = window.innerHeight;
                const isKeyboardOpen = currentHeight < lastViewportHeight;
                
                if (isKeyboardOpen) {
                    // Keyboard opened, ensure focused element is visible
                    const activeElement = document.activeElement;
                    if (activeElement && activeElement.scrollIntoView) {
                        setTimeout(() => activeElement.scrollIntoView({ behavior: 'smooth', block: 'center' }), 100);
                    }
                }
                lastViewportHeight = currentHeight;
            }, { passive: true });
        }

        // Single init function to centralize startup logic
        async function initApp() {
            loadState();
            handleMobileViewport();
            renderGallery();
            
            // Show loading indicator while fetching data
            const menuGrid = document.getElementById('menuGrid');
            const productsGrid = document.getElementById('productsGrid');
            if (menuGrid) menuGrid.innerHTML = '<p style="grid-column: 1/-1; text-align: center; padding: 2rem; color: var(--gold);">‚è≥ Loading menu items...</p>';
            if (productsGrid) productsGrid.innerHTML = '<p style="grid-column: 1/-1; text-align: center; padding: 2rem; color: var(--gold);">‚è≥ Loading products...</p>';
            
            // Fetch data from APIs
            const menuLoaded = await fetchMenuItems();
            const productsLoaded = await fetchProducts();
            
            // Render with API data or show fallback message
            if (menuLoaded && menuItems.length > 0) {
                renderMenu();
            } else if (menuGrid) {
                const backendHost = (API_BASE_URL || '').replace(/\/api$/i, '');
                menuGrid.innerHTML = `<p style="grid-column: 1/-1; text-align: center; padding: 2rem; color: #ff6b6b;">Unable to load menu items. Is the backend available at <a href="${backendHost}" target="_blank" rel="noreferrer" style="color:var(--gold);">${backendHost}</a>?</p>`;
            }
            
            if (productsLoaded && products.length > 0) {
                renderProducts();
            } else if (productsGrid) {
                const backendHost = (API_BASE_URL || '').replace(/\/api$/i, '');
                productsGrid.innerHTML = `<p style="grid-column: 1/-1; text-align: center; padding: 2rem; color: #ff6b6b;">Unable to load products. Is the backend available at <a href="${backendHost}" target="_blank" rel="noreferrer" style="color:var(--gold);">${backendHost}</a>?</p>`;
            }
            
            renderReviews();
            updateCartBadge();
            updateFavoriteButtons();
            updateLoyaltyDisplay();
            showToast('Welcome to BREWLUXE!');
            startReviewCarousel();
            setupEventListeners();

            // Newsletter prompt after short delay
            setTimeout(() => {
                const modal = document.getElementById('newsletterModal');
                if (modal) modal.classList.add('active');
            }, 5000);

            // Register checkout form handler here (centralized)
            const checkoutForm = document.getElementById('checkoutForm');
            if (checkoutForm) {
                checkoutForm.addEventListener('submit', async (e) => {
                    e.preventDefault();
                    const formData = new FormData(checkoutForm);

                    // client-side validation
                    const validation = validateCheckout(formData);
                    if (!validation.valid) {
                        showToast(validation.message);
                        return;
                    }

                    const paymentMethod = formData.get('paymentMethod');

                    try {
                        // Prepare order data
                        const orderData = {
                            orderType: currentOrderType,
                            customer: {
                                fullName: formData.get('fullName'),
                                email: formData.get('email'),
                                phone: formData.get('phone'),
                                address: formData.get('address'),
                                city: formData.get('city'),
                                postalCode: formData.get('postalCode'),
                                instructions: formData.get('instructions')
                            },
                            items: cart,
                            specialRequests: formData.get('specialRequests'),
                            paymentMethod: paymentMethod,
                            subtotal: cart.reduce((sum, item) => sum + (item.price * item.quantity), 0),
                            deliveryFee: currentOrderType === 'delivery' ? 3.99 : 0,
                            total: parseFloat(document.getElementById('checkoutTotal').textContent)
                        };

                        if (paymentMethod === 'card') {
                            // Send to Stripe (mocked by local mock server)
                            const stripeResponse = await fetch(`${API_BASE_URL}/payment/create-payment-intent`, {
                                method: 'POST',
                                headers: { 'Content-Type': 'application/json' },
                                body: JSON.stringify(orderData)
                            });

                            if (stripeResponse.ok) {
                                const result = await stripeResponse.json();
                                processStripePayment(result, orderData);
                            } else {
                                throw new Error('Payment gateway error');
                            }
                        } else {
                            // Submit order directly for COD or UPI
                            await submitOrder(orderData);
                        }
                    } catch (error) {
                        showToast('Error processing payment: ' + error.message);
                    }
                });
            }
        }

        // Run init on DOMContentLoaded
        window.addEventListener('DOMContentLoaded', initApp);

        function renderGallery() {
            const grid = document.getElementById('galleryGrid');
            grid.innerHTML = galleryItems.map((item, index) => `
                <div class="gallery-item" onclick="openLightbox(${index})">
                    ${item.type === 'image' 
                        ? `<img src="${item.src}" alt="${item.title}">`
                        : `<video muted loop><source src="${item.src}" type="video/mp4"></video>`
                    }
                    <div class="gallery-overlay">
                        <h3>${item.title}</h3>
                        <p>${item.desc}</p>
                    </div>
                </div>
            `).join('');
            
            document.querySelectorAll('.gallery-item video').forEach(video => {
                video.addEventListener('mouseenter', () => video.play());
                video.addEventListener('mouseleave', () => video.pause());
            });
        }

        function openLightbox(index) {
            const item = galleryItems[index];
            const lightbox = document.getElementById('lightbox');
            const content = document.getElementById('lightboxContent');
            
            if (item.type === 'image') {
                content.innerHTML = `<img src="${item.src}" alt="${item.title}">`;
            } else {
                content.innerHTML = `<video controls autoplay><source src="${item.src}" type="video/mp4"></video>`;
            }
            
            lightbox.classList.add('active');
        }

        function closeLightbox() {
            document.getElementById('lightbox').classList.remove('active');
        }

        function renderMenu() {
            const grid = document.getElementById('menuGrid');
            grid.innerHTML = menuItems.map(item => `
                <div class="menu-card" data-id="${item.id}">
                    <img src="${item.image}" alt="${item.name}">
                    <h3>${item.name}</h3>
                    <p>${item.description}</p>
                    <div class="price-row">
                        <span class="price">${item.price.toFixed(2)}</span>
                        <div class="card-actions">
                            <button class="icon-btn-small fav-btn" onclick="toggleFavorite(${item.id}, 'menu')" title="Add to favorites">
                                ‚ù§Ô∏è
                            </button>
                            <button class="icon-btn-small" onclick="addToCart(${item.id}, 'menu')" title="Add to cart">
                                üõí
                            </button>
                        </div>
                    </div>
                </div>
            `).join('');
        }

        function renderProducts() {
            const grid = document.getElementById('productsGrid');
            grid.innerHTML = products.map(item => `
                <div class="product-card" data-id="${item.id}">
                    <img src="${item.image}" alt="${item.name}">
                    <h3>${item.name}</h3>
                    <div class="rating">${'‚≠ê'.repeat(item.rating)}</div>
                    <p>${item.description}</p>
                    <div class="price-row">
                        <span class="price">${item.price.toFixed(2)}</span>
                        <div class="card-actions">
                            <button class="icon-btn-small fav-btn" onclick="toggleFavorite(${item.id}, 'product')" title="Add to favorites">
                                ‚ù§Ô∏è
                            </button>
                            <button class="icon-btn-small" onclick="addToCart(${item.id}, 'product')" title="Add to cart">
                                üõí
                            </button>
                        </div>
                    </div>
                </div>
            `).join('');
        }

        function renderReviews() {
            const container = document.getElementById('reviewSlides');
            container.innerHTML = reviews.map((review, index) => `
                <div class="review-slide ${index === 0 ? 'active' : ''}" data-index="${index}">
                    <img src="${review.avatar}" alt="${review.name}" class="review-avatar">
                    <h3>${review.name}</h3>
                    <div class="review-stars">${'‚≠ê'.repeat(review.rating)}</div>
                    <p style="font-style: italic; color: rgba(255,255,255,0.8);">"${review.text}"</p>
                    <p style="color: var(--gold); margin-top: 1rem; font-size: 0.9rem;">${review.date}</p>
                </div>
            `).join('');
        }

        function addToCart(id, type) {
            const item = type === 'menu' 
                ? menuItems.find(i => i.id === id)
                : products.find(i => i.id === id);
            
            const existing = cart.find(i => i.id === id && i.type === type);
            
            if (existing) {
                existing.quantity++;
            } else {
                cart.push({ ...item, type, quantity: 1 });
            }
            
            updateCartBadge();
            addLoyaltyPoints(item.price * 0.1);
            showToast(`${item.name} added to cart!`);
            saveState();
        }

        function updateCartBadge() {
            const badge = document.getElementById('cartBadge');
            const total = cart.reduce((sum, item) => sum + item.quantity, 0);
            badge.textContent = total;
        }

        function toggleFavorite(id, type) {
            const key = `${type}-${id}`;
            const index = favorites.indexOf(key);
            
            if (index > -1) {
                favorites.splice(index, 1);
                showToast('Removed from favorites');
            } else {
                favorites.push(key);
                showToast('Added to favorites!');
            }
            
            updateFavoriteButtons();
            saveState();
        }

        function updateFavoriteButtons() {
            document.querySelectorAll('.fav-btn').forEach(btn => {
                const card = btn.closest('[data-id]');
                if (!card) return;
                
                const id = card.dataset.id;
                const type = card.closest('#menuGrid') ? 'menu' : 'product';
                const key = `${type}-${id}`;
                
                if (favorites.includes(key)) {
                    btn.classList.add('active');
                } else {
                    btn.classList.remove('active');
                }
            });
        }

        function addLoyaltyPoints(amount) {
            const points = Math.floor(amount * 10);
            loyaltyPoints += points;
            updateLoyaltyDisplay();
            saveState();
        }

        function updateLoyaltyDisplay() {
            document.getElementById('pointsDisplay').textContent = loyaltyPoints;
            const remaining = Math.max(0, 750 - loyaltyPoints);
            document.getElementById('pointsToGold').textContent = remaining;
            const progress = Math.min(100, (loyaltyPoints / 750) * 100);
            document.getElementById('progressFill').style.width = progress + '%';
            
            if (loyaltyPoints >= 750 && loyaltyPoints < 760) {
                showToast('Congratulations! You are now a Gold Member!');
            }
        }

        function changeReview(direction) {
            const slides = document.querySelectorAll('.review-slide');
            slides[currentReview].classList.remove('active');
            currentReview = (currentReview + direction + reviews.length) % reviews.length;
            slides[currentReview].classList.add('active');
        }

        function startReviewCarousel() {
            setInterval(() => changeReview(1), 5000);
        }

        function toggleChat() {
            document.getElementById('chatWindow').classList.toggle('active');
        }

        document.getElementById('chatToggle').addEventListener('click', toggleChat);
        document.getElementById('chatInput').addEventListener('keypress', (e) => {
            if (e.key === 'Enter') sendChatMessage();
        });

        function sendChatMessage() {
            const input = document.getElementById('chatInput');
            const message = input.value.trim();
            
            if (!message) return;
            
            addUserMessage(message);
            input.value = '';
            
            setTimeout(() => handleChatResponse(message.toLowerCase()), 800);
        }

        function addUserMessage(text) {
            const container = document.getElementById('chatMessages');
            const msg = document.createElement('div');
            msg.className = 'message user';
            msg.textContent = text;
            container.appendChild(msg);
            container.scrollTop = container.scrollHeight;
        }

        function addBotMessage(text) {
            const container = document.getElementById('chatMessages');
            const msg = document.createElement('div');
            msg.className = 'message bot';
            msg.textContent = text;
            container.appendChild(msg);
            container.scrollTop = container.scrollHeight;
        }

        function handleChatResponse(message) {
            let response = '';
            
            if (message.includes('price') || message.includes('cost')) {
                response = 'Our drinks range from $3.50 to $6.00. Coffee beans are $15.99 to $20.99. Check our menu for details!';
            } else if (message.includes('delivery') || message.includes('order')) {
                response = 'We offer pickup and delivery! Orders are ready in 15-20 minutes. Delivery within 5 miles is $3.99.';
            } else if (message.includes('loyalty') || message.includes('points')) {
                response = `You have ${loyaltyPoints} points! Earn 10% back on every purchase. Reach 750 points for Gold Member status!`;
            } else if (message.includes('location') || message.includes('hours')) {
                response = 'We are open Mon-Fri 6AM-8PM, Sat-Sun 7AM-9PM. Visit us at 123 Coffee Street, Chennai!';
            } else if (message.includes('hello') || message.includes('hi')) {
                response = 'Hello! Welcome to BREWLUXE! How can I help you today?';
            } else if (message.includes('menu') || message.includes('coffee')) {
                response = 'We have a variety of coffee drinks including Espresso, Cappuccino, Latte, Mocha, and more! Check our menu section.';
            } else {
                response = 'I would be happy to help! Ask me about prices, delivery, loyalty points, or our location and hours.';
            }
            
            addBotMessage(response);
        }

        document.getElementById('searchBtn').addEventListener('click', openSearch);
        document.addEventListener('keydown', (e) => {
            if (e.ctrlKey && e.key === 'k') {
                e.preventDefault();
                openSearch();
            }
            if (e.key === 'Escape') {
                closeSearch();
                closeNewsletter();
                closeCart();
                closeLightbox();
            }
        });

        function openSearch() {
            document.getElementById('searchModal').classList.add('active');
            document.getElementById('searchInput').focus();
        }

        function closeSearch() {
            document.getElementById('searchModal').classList.remove('active');
        }

        document.getElementById('searchInput').addEventListener('input', (e) => {
            const query = e.target.value.toLowerCase();
            const results = [...menuItems, ...products].filter(item => 
                item.name.toLowerCase().includes(query) || 
                item.description.toLowerCase().includes(query)
            );
            
            const resultsDiv = document.getElementById('searchResults');
            
            if (query.length === 0) {
                resultsDiv.innerHTML = '';
                return;
            }
            
            resultsDiv.innerHTML = `
                <p style="margin: 1rem 0; color: var(--gold);">Found ${results.length} results</p>
                ${results.map(item => `
                    <div style="padding: 1rem; background: var(--glass); margin: 0.5rem 0; border-radius: 10px; cursor: pointer;" onclick="closeSearch(); scrollToSection('${products.includes(item) ? 'products' : 'menu'}');">
                        <strong>${item.name}</strong> - ${item.price.toFixed(2)}
                        <br><small>${item.description}</small>
                    </div>
                `).join('')}
            `;
        });

        document.getElementById('contactForm').addEventListener('submit', (e) => {
            e.preventDefault();
            showToast('Message sent successfully! We will get back to you soon.');
            e.target.reset();
        });

        function closeNewsletter() {
            document.getElementById('newsletterModal').classList.remove('active');
        }

        document.getElementById('newsletterForm').addEventListener('submit', (e) => {
            e.preventDefault();
            addLoyaltyPoints(20);
            showToast('Subscribed! +20 loyalty points earned!');
            closeNewsletter();
            e.target.reset();
        });

        document.getElementById('notificationBtn').addEventListener('click', () => {
            showToast('You have 3 notifications: Welcome offer, New blend available, Double points today!');
            document.getElementById('notifBadge').textContent = '0';
        });

        document.getElementById('cartBtn').addEventListener('click', openCart);

        function openCart() {
            document.getElementById('cartModal').classList.add('active');
            renderCart();
        }

        function closeCart() {
            document.getElementById('cartModal').classList.remove('active');
        }

        function renderCart() {
            const container = document.getElementById('cartModalContent');
            
            if (cart.length === 0) {
                container.innerHTML = '<p style="text-align: center; padding: 2rem; color: rgba(255,255,255,0.6);">Your cart is empty</p>';
                document.getElementById('cartTotal').textContent = '0.00';
                return;
            }
            
            container.innerHTML = cart.map((item, index) => `
                <div class="cart-item">
                    <div class="cart-item-info">
                        <h4>${item.name}</h4>
                        <p style="color: rgba(255,255,255,0.6);">${item.price.toFixed(2)} each</p>
                    </div>
                    <div class="cart-item-controls">
                        <button class="qty-btn" onclick="updateQuantity(${index}, -1)">-</button>
                        <span style="color: var(--gold); font-weight: 600;">${item.quantity}</span>
                        <button class="qty-btn" onclick="updateQuantity(${index}, 1)">+</button>
                        <button class="icon-btn-small" onclick="removeFromCart(${index})" style="margin-left: 0.5rem;">üóëÔ∏è</button>
                    </div>
                </div>
            `).join('');
            
            const total = cart.reduce((sum, item) => sum + (item.price * item.quantity), 0);
            document.getElementById('cartTotal').textContent = total.toFixed(2);
        }

        function updateQuantity(index, change) {
            cart[index].quantity += change;
            
            if (cart[index].quantity <= 0) {
                cart.splice(index, 1);
            }
            
            updateCartBadge();
            renderCart();
            saveState();
        }

        function removeFromCart(index) {
            cart.splice(index, 1);
            updateCartBadge();
            renderCart();
            showToast('Item removed from cart');
            saveState();
        }

        let currentOrderType = 'pickup';

        function setOrderType(type) {
            currentOrderType = type;
            document.getElementById('pickupBtn').classList.toggle('active', type === 'pickup');
            document.getElementById('deliveryBtn').classList.toggle('active', type === 'delivery');
            
            const deliveryFields = document.getElementById('deliveryFields');
            deliveryFields.style.display = type === 'delivery' ? 'block' : 'none';
            
            const deliveryFeeRow = document.querySelector('[id="deliveryFeeRow"]');
            if (deliveryFeeRow) {
                deliveryFeeRow.style.display = type === 'delivery' ? 'flex' : 'none';
                updateCheckoutTotal();
            }
        }

        function proceedToCheckout() {
            if (cart.length === 0) {
                showToast('Your cart is empty!');
                return;
            }
            
            renderCheckout();
            document.getElementById('checkoutModal').classList.add('active');
        }

        function renderCheckout() {
            const itemsList = document.getElementById('checkoutItemsList');
            const subtotal = cart.reduce((sum, item) => sum + (item.price * item.quantity), 0);
            
            itemsList.innerHTML = cart.map(item => `
                <div style="display: flex; justify-content: space-between; margin-bottom: 0.5rem; padding-bottom: 0.5rem; border-bottom: 1px solid rgba(201,169,110,0.2);">
                    <span>${item.name} x${item.quantity}</span>
                    <span>$${(item.price * item.quantity).toFixed(2)}</span>
                </div>
            `).join('');
            
            document.getElementById('checkoutSubtotal').textContent = subtotal.toFixed(2);
            updateCheckoutTotal();
        }

        function updateCheckoutTotal() {
            const subtotal = cart.reduce((sum, item) => sum + (item.price * item.quantity), 0);
            const deliveryFee = currentOrderType === 'delivery' ? 3.99 : 0;
            const total = subtotal + deliveryFee;
            
            document.getElementById('checkoutTotal').textContent = total.toFixed(2);
        }

        function closeCheckout() {
            document.getElementById('checkoutModal').classList.remove('active');
            document.getElementById('checkoutContent').style.display = 'block';
            document.getElementById('orderConfirmation').style.display = 'none';
        }

        // Add order type button styles
        const orderStyle = document.createElement('style');
        orderStyle.textContent = `
            .order-type-btn {
                padding: 0.8rem 1.5rem;
                border: 2px solid rgba(201, 169, 110, 0.3);
                background: rgba(255, 255, 255, 0.05);
                color: rgba(255, 255, 255, 0.8);
                border-radius: 10px;
                cursor: pointer;
                transition: all 0.3s;
                flex: 1;
            }

            .order-type-btn:hover {
                border-color: var(--gold);
                color: var(--gold);
            }

            .order-type-btn.active {
                background: var(--gold);
                border-color: var(--gold);
                color: white;
            }

            @media (max-width: 768px) {
                .order-type-btn {
                    padding: 0.7rem 1rem;
                    font-size: 0.95rem;
                }
            }
        `;
        document.head.appendChild(orderStyle);

        async function submitOrder(orderData) {
            try {
                const response = await fetch(`${API_BASE_URL}/orders`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(orderData)
                });

                if (!response.ok) throw new Error('Order submission failed');

                const result = await response.json();
                showOrderConfirmation(result.orderId);
                
                addLoyaltyPoints(orderData.total * 0.1);
                cart = [];
                updateCartBadge();
            } catch (error) {
                showToast('Error submitting order: ' + error.message);
            }
        }

        function processStripePayment(paymentIntent, orderData) {
            // If using card, you would integrate Stripe.js here
            // For now, simulate successful payment
            setTimeout(() => {
                orderData.paymentIntentId = paymentIntent.id;
                showOrderConfirmation(paymentIntent.orderId || Math.random().toString(36).substr(2, 9).toUpperCase());
                
                addLoyaltyPoints(orderData.total * 0.1);
                cart = [];
                updateCartBadge();
            }, 1000);
        }

        function showOrderConfirmation(orderId) {
            const estimatedTime = currentOrderType === 'delivery' ? '30-45 minutes' : '15-20 minutes';
            
            document.getElementById('checkoutContent').style.display = 'none';
            document.getElementById('orderConfirmation').style.display = 'block';
            document.getElementById('orderNumber').textContent = orderId;
            document.getElementById('estimatedTime').textContent = estimatedTime;
        }

        function showToast(message) {
            const toast = document.createElement('div');
            toast.className = 'toast';
            toast.innerHTML = `<span style="font-size: 24px;">‚ú®</span><span>${message}</span>`;
            document.body.appendChild(toast);
            
            setTimeout(() => toast.classList.add('show'), 100);
            setTimeout(() => {
                toast.classList.remove('show');
                setTimeout(() => toast.remove(), 300);
            }, 3500);
        }

        function scrollToSection(id) {
            document.getElementById(id).scrollIntoView({ behavior: 'smooth' });
        }

        function setupEventListeners() {
            // Scroll listener with throttle for performance
            let scrollTimeout;
            window.addEventListener('scroll', () => {
                if (scrollTimeout) return;
                scrollTimeout = setTimeout(() => {
                    const nav = document.querySelector('nav');
                    if (window.scrollY > 100) {
                        nav.style.background = 'rgba(15, 15, 15, 0.98)';
                        nav.style.boxShadow = '0 5px 30px rgba(201, 169, 110, 0.2)';
                    } else {
                        nav.style.background = 'rgba(15, 15, 15, 0.95)';
                        nav.style.boxShadow = '0 2px 20px rgba(201, 169, 110, 0.1)';
                    }
                    scrollTimeout = null;
                }, 100);
            }, { passive: true });

            // Mobile Menu with better accessibility
            const hamburger = document.getElementById('hamburger');
            const navLinks = document.getElementById('navLinks');
            
            hamburger.addEventListener('click', (e) => {
                e.preventDefault();
                const isOpen = hamburger.classList.contains('active');
                hamburger.classList.toggle('active');
                navLinks.classList.toggle('active');
                // Prevent body scroll when menu open on mobile
                if (!isOpen) {
                    document.body.style.overflow = 'hidden';
                } else {
                    document.body.style.overflow = '';
                }
                hamburger.setAttribute('aria-expanded', !isOpen);
            });

            navLinks.addEventListener('click', (e) => {
                if (e.target.tagName === 'A') {
                    hamburger.classList.remove('active');
                    navLinks.classList.remove('active');
                    document.body.style.overflow = '';
                    hamburger.setAttribute('aria-expanded', 'false');
                }
            });

            // Close modals on backdrop click
            document.addEventListener('click', (e) => {
                if (e.target.classList.contains('modal') && !e.target.classList.contains('modal-content')) {
                    closeSearch();
                    closeNewsletter();
                    closeCart();
                }
                
                if (e.target.id === 'lightbox') {
                    closeLightbox();
                }
            });

            // Prevent zoom on input focus on iOS
            document.addEventListener('touchstart', () => {}, { passive: true });
        }

        // Add CSS for mobile nav
        const style = document.createElement('style');
        style.textContent = `
            @media (max-width: 768px) {
                #navLinks {
                    position: fixed;
                    left: -100%;
                    top: 60px;
                    flex-direction: column;
                    background-color: rgba(15, 15, 15, 0.99);
                    width: 100%;
                    text-align: center;
                    transition: 0.3s;
                    gap: 0;
                    padding: 2rem 0;
                    border-top: 1px solid rgba(201, 169, 110, 0.2);
                    backdrop-filter: blur(10px);
                    z-index: 999;
                }

                #navLinks.active {
                    left: 0;
                }

                #navLinks li a {
                    display: block;
                    padding: 1rem;
                    border-bottom: 1px solid rgba(201, 169, 110, 0.1);
                }
            }
        `;
        document.head.appendChild(style);
    </script>
</body>
</html>